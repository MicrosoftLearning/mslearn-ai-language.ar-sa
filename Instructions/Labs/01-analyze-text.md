---
lab:
  title: تحليل النص
  description: استخدم خدمة Azure AI Language لتحليل النصوص، بما في ذلك اكتشاف اللغة، وتحليل المشاعر، واستخراج العبارات الرئيسية، والتعرف على العناصر.
---

# تحليل النص

تدعم خدمة **Azure AI Language** تحليل النصوص، بما في ذلك اكتشاف اللغة، وتحليل المشاعر، واستخراج العبارات الأساسية، والتعرف على العناصر.

على سبيل المثال، لنفترض أن وكالة سفر تريد معالجة تقييمات الفنادق التي تم إرسالها إلى موقع الويب الخاص بالشركة. باستخدام Azure AI Language، يمكنها تحديد اللغة التي تتم كتابة كل تقييم بها، أو التوجه (الإيجابي أو المحايد أو السلبي) للتقييمات، والعبارات الرئيسية التي قد تشير إلى الموضوعات الرئيسية التي تمت مناقشتها في التقييم، والكيانات المسماة، مثل الأماكن أو المعالم أو الأشخاص المذكورين في التقييمات. في هذا التمرين، ستستخدم عدة تطوير البرامج (SDK) الخاصة بـ Azure AI Language بلغة Python لتحليل النصوص وتنفيذ تطبيق بسيط لتقييمات الفنادق بناءً على هذا المثال.

يستند هذا التمرين إلى لغة Python، لكن يمكنك تطوير تطبيقات تحليل النصوص باستخدام عِدد تطوير برامج (SDK) خاصة بلغات متعددة، منها:

- [مكتبة عميل Azure AI Text Analytics للغة Python](https://pypi.org/project/azure-ai-textanalytics/)
- [مكتبة عميل Azure AI Text Analytics للغة NET.](https://www.nuget.org/packages/Azure.AI.TextAnalytics)
- [مكتبة عميل Azure AI Text Analytics للغة JavaScript](https://www.npmjs.com/package/@azure/ai-text-analytics)

سيستغرق هذا التدريب حوالي **30** دقيقة.

## توفير مورد *Azure AI Language*

إذا لم يكن لديك بالفعل واحد في اشتراكك، فسيتعين عليك توفير مورد **خدمة Azure AI Language** في اشتراك Azure لديك.

1. افتح مدخل Azure على `https://portal.azure.com`، وسجل الدخول باستخدام حساب Microsoft المقترن باشتراك Azure.
1. حدد **Create a resource.**
1. في حقل البحث، ابحث عن **خدمة اللغة**. ثم، في النتائج، حدد **إنشاء** ضمن **خدمة اللغة**.
1. حدد **Continue to create your resource**.
1. توفير المورد باستخدام الإعدادات التالية:
    - **الاشتراك**: *اشتراك Azure الخاص بك*.
    - **مجموعة الموارد**: *اختيار مجموعة موارد أو إنشاءها*.
    - **المنطقة**: *اختر أي منطقة متوفرة*
    - **الاسم**: *أدخل اسمًا مميزًا*.
    - **مستوى الأسعار**: حدد **F0** (*مجاني*)، أو **S** (*قياسي*) إذا لم يكن F متوفراً.
    - **إشعار الذكاء الاصطناعي المسؤول**: أوافق.
1. حدد **مراجعة + إنشاء**، ثم حدد **إنشاء** لتوفير المورد.
1. انتظر حتى يكتمل النشر، ثم انتقل إلى المورد المنشور.
1. اعرض صفحة **المفاتيح ونقطة النهاية** في قسم **إدارة الموارد**. ستحتاج إلى المعلومات الموجودة في هذه الصفحة لاحقاً في التدريب.

## استنساخ المستودع لهذه الدورة التدريبية

ستقوم بتطوير التعليمات البرمجية الخاصة بك باستخدام Cloud Shell من بوابة Azure. تم توفير ملفات التعليمات البرمجية لتطبيقك في GitHub repo.

1. في بوابة Azure، استخدم الزر **[\>_]** على يمين شريط البحث أعلى الصفحة لإنشاء Cloud Shell جديد في بوابة Azure، وتحديد بيئة ***PowerShell***. يوفّر Cloud Shell واجهة سطر أوامر في جزء أسفل بوابة Azure.

    > **ملاحظة**: إذا كنت قد أنشأت مسبقًا Cloud Shell يستخدم بيئة *معالج Bash*، فبدّل إلى ***PowerShell***.

1. في شريط أدوات Cloud Shell، في قائمة **الإعدادات**، حدد **الانتقال إلى الإصدار الكلاسيكي** (هذا مطلوب لاستخدام محرر التعليمات البرمجية).

    **<font color="red">تأكد من التبديل إلى الإصدار الكلاسيكي من cloud shell قبل المتابعة.</font>**

1. في جزء PowerShell، أدخل الأوامر التالية لاستنساخ مستودع GitHub لهذا التمرين:

    ```
    rm -r mslearn-ai-language -f
    git clone https://github.com/microsoftlearning/mslearn-ai-language
    ```

    > **تلميح**: عند إدخال الأوامر في Cloudshell، قد يحتل الناتج مساحة كبيرة من ذاكرة الشاشة المؤقتة. يمكنك مسح الشاشة عن طريق إدخال الأمر `cls` لتسهيل التركيز على كل مهمة.

1. بعد استنساخ مخزن بيانات خاصة، انتقل إلى المجلد الذي يحتوي على ملفات التعليمات البرمجية لتطبيق الدردشة:  

    ```
    cd mslearn-ai-language/Labfiles/01-analyze-text/Python/text-analysis
    ```

## تكوين تطبيقك

1. في جزء سطر الأوامر، قُم بتنفيذ الأمر التالي لعرض ملفات التعليمات البرمجية في مجلد **text-analysis**:

    ```
   ls -a -l
    ```

    تتضمن الملفات ملف تكوين (**.env**) وملف تعليمات برمجية (**text-analysis.py**). النص الذي سيقوم التطبيق بتحليله محفوظ في المجلد الفرعي **المراجعات**.

1. أنشئ بيئة افتراضية للغة Python وثبت حزمة تطوير البرامج (SDK) الخاصة بـ Azure AI Language Text Analytics وغيرها من الحزم المطلوبة عبر تنفيذ الأمر التالي:

    ```
    python -m venv labenv
    ./labenv/bin/Activate.ps1
    pip install -r requirements.txt azure-ai-textanalytics==5.3.0
    ```

1. أدخِل الأمر التالي لتحرير ملف تكوين التطبيق:

    ```
   code .env
    ```

    يتم فتح الملف في محرر التعليمات البرمجية.

1. قم بتحديث قيم التكوين لتضمين **نقطة النهاية** و**مفتاح** من مورد Azure Language الذي أنشأته (متوفر في صفحة **المفاتيح ونقطة النهاية** لمورد Azure AI Language في مدخل Microsoft Azure)
1. بعد استبدال العناصر النائبة، استخدم الأمر **CTRL+S** أو **Right-click > Save** لحفظ التغييرات ثم استخدم الأمر **CTRL+Q** أو **Right-click > Quit** لإغلاق محرر التعليمات البرمجية مع إبقاء سطر أوامر Cloud Shell مفتوحًا.

## أضِف التعليمات البرمجية لربط التطبيق بمورد Azure AI Language الخاص بك

1. أدخِل الأمر التالي لفتح ملف التعليمات البرمجية الخاص بالتطبيق وتحريره:

    ```
    code text-analysis.py
    ```

1. راجع التعليمات البرمجية الموجودة حاليًا. عليك إضافة التعليمات البرمجية لاستخدام عدة تطوير البرامج (SDK) الخاصة بـ AI Language Text Analytics.

    > **تلميح**: خلال إضافة التعليمات البرمجية إلى ملف التعليمات البرمجية، تأكد من الحفاظ على المسافة البادئة الصحيحة.

1. في بداية ملف التعليمات البرمجية، وضمن المراجع الحالية للمساحات الاسمية، ابحث عن التعليق **Import namespaces** وأضِف التعليمات البرمجية التالية لاستيراد المساحات الاسمية الضرورية لاستخدام عدة تطوير البرامج (SDK) الخاصة بـ Text Analytics:

    ```python
   # import namespaces
   from azure.core.credentials import AzureKeyCredential
   from azure.ai.textanalytics import TextAnalyticsClient
    ```

1. في الدالة **Main**، لاحظ أنه تم بالفعل توفير التعليمات البرمجية لتحميل نقطة النهاية ومفتاح خدمة Azure AI Language من ملف التكوين. ثم ابحث عن التعليق **إنشاء عميل باستخدام نقطة النهاية والمفتاح**، وأضف التعليمة البرمجية التالية لإنشاء عميل لواجهة برمجة تطبيقات تحليل النص:

    ```Python
   # Create client using endpoint and key
   credential = AzureKeyCredential(ai_key)
   ai_client = TextAnalyticsClient(endpoint=ai_endpoint, credential=credential)
    ```

1. احفظ تغييراتك باستخدام (CTRL+S)، بعدها نفذ الأمر التالي لتشغيل البرنامج (قُم بتكبير جزء cloud shell وتعديل حجم الألواح لمشاهدة المزيد من النص في جزء سطر الأوامر):

    ```
   python text-analysis.py
    ```

1. لاحظ المخرجات حيث يجب تشغيل التعليمات البرمجية دون خطأ، مع عرض محتويات كل ملف نصي للتعليقات في مجلد **التعليقات**. ينشئ التطبيق بنجاح عميلاً لواجهة برمجة تطبيقات Text Analytics ولكنه لا يستفيد منه. سنقوم بإصلاح ذلك في القسم التالي.

## إضافة تعليمة برمجية للكشف عن اللغة

الآن بعد أن قمت بإنشاء عميل لواجهة برمجة التطبيقات، دعنا نستخدمه للكشف عن اللغة التي تتم كتابة كل تقييم بها.

1. في محرر التعليمات البرمجية، ابحث عن التعليق **Get language**. أضِف بعد ذلك التعليمات البرمجية اللازمة لاكتشاف اللغة في كل مستند مراجعة:

    ```python
   # Get language
   detectedLanguage = ai_client.detect_language(documents=[text])[0]
   print('\nLanguage: {}'.format(detectedLanguage.primary_language.name))
    ```

     > **ملاحظة**: *في هذا المثال، يتم تحليل كل تقييم بشكل فردي، مما يؤدي إلى استدعاء منفصل للخدمة لكل ملف. يتمثل النهج البديل في إنشاء مجموعة من المستندات وتمريرها إلى الخدمة في استدعاء واحد. وفي كلا النهجين، تتكون الاستجابة من الخدمة من مجموعة من المستندات؛ ولهذا السبب تم تحديد فهرس المستند الأول (والوحيد) في الاستجابة ([0]) في تعليمة Python البرمجية أعلاه.*

1. احفظ تغييراتك. ثم أعِد تشغيل البرنامج.
1. لاحظ المخرجات، مع ملاحظة أنه يتم تحديد لغة كل تقييم في هذه المرة.

## إضافة تعليمة برمجية لتقييم التوجه

*تحليل التوجه* هو أسلوب شائع الاستخدام لتصنيف النص على أنه *إيجابي* أو *سلبي* (أو احتمالية كونه * محايد *أو* مختلط*). يتم استخدامه عادة لتحليل منشورات الوسائط الاجتماعية والتعليقات على المنتجات والعناصر الأخرى حيث قد يوفر توجه النص نتائج تحليلات مفيدة.

1. في محرر التعليمات البرمجية، ابحث عن التعليق **Get sentiment**. بعد ذلك، أضِف التعليمات البرمجية اللازمة لاكتشاف المشاعر في كل مستند مراجعة:

    ```python
   # Get sentiment
   sentimentAnalysis = ai_client.analyze_sentiment(documents=[text])[0]
   print("\nSentiment: {}".format(sentimentAnalysis.sentiment))
    ```

1. احفظ تغييراتك. ثم أغلِق محرر التعليمات البرمجية وأعِد تشغيل البرنامج.
1. لاحظ المخرجات، مع ملاحظة أنه تم الكشف عن توجه التعليقات.

## إضافة تعليمة برمجية لتحديد العبارات الرئيسية

قد يكون من المفيد تحديد العبارات الرئيسية في نص أساسي للمساعدة في تحديد الموضوعات الرئيسية التي يناقشها.

1. في محرر التعليمات البرمجية، ابحث عن التعليق **Get key phrases**. بعد ذلك، أضِف التعليمات البرمجية اللازمة لاستخراج العبارات الرئيسية من كل مستند مراجعة:

    ```python
   # Get key phrases
   phrases = ai_client.extract_key_phrases(documents=[text])[0].key_phrases
   if len(phrases) > 0:
        print("\nKey Phrases:")
        for phrase in phrases:
            print('\t{}'.format(phrase))
    ```

1. احفظ التغييرات وأعِد تشغيل البرنامج.
1. لاحظ المخرجات، مع ملاحظة أن كل مستند يحتوي على عبارات رئيسية تعطي بعض نتائج التحليلات حول ما يتعلق به التعليقات.

## إضافة رمز لاستخراج الكيانات

في كثير من الأحيان، تشير المستندات أو النصوص الأخرى إلى الأشخاص أو الأماكن أو الفترات الزمنية أو الكيانات الأخرى. يمكن لواجهة برمجة تطبيقات  text Analytics الكشف عن فئات متعددة (وفئات فرعية) للكيان في النص الخاص بك.

1. في محرر التعليمات البرمجية، ابحث عن التعليق **Get entities**. بعد ذلك، أضِف التعليمات البرمجية اللازمة للتعرف على العناصر المذكورة في كل مراجعة:

    ```python
   # Get entities
   entities = ai_client.recognize_entities(documents=[text])[0].entities
   if len(entities) > 0:
        print("\nEntities")
        for entity in entities:
            print('\t{} ({})'.format(entity.text, entity.category))
    ```

1. احفظ التغييرات وأعِد تشغيل البرنامج.
1. لاحظ المخرجات، مع ملاحظة الكيانات التي تم الكشف عنها في النص.

## إضافة تعليمة برمجية لاستخراج الكيانات المرتبطة

بالإضافة إلى الكيانات المصنفة، يمكن لواجهة برمجة تطبيقات Text Analytics الكشف عن الكيانات التي توجد لها ارتباطات معروفة بمصادر البيانات، مثل ويكيبيديا.

1. في محرر التعليمات البرمجية، ابحث عن التعليق **Get linked entities**. بعد ذلك، أضِف التعليمات البرمجية اللازمة للتعرف على العناصر المرتبطة المذكورة في كل مراجعة:

    ```python
   # Get linked entities
   entities = ai_client.recognize_linked_entities(documents=[text])[0].entities
   if len(entities) > 0:
        print("\nLinks")
        for linked_entity in entities:
            print('\t{} ({})'.format(linked_entity.name, linked_entity.url))
    ```

1. احفظ التغييرات وأعِد تشغيل البرنامج.
1. لاحظ المخرجات، مع ملاحظة الكيانات المرتبطة التي تم تحديدها.

## تنظيف الموارد

إذا انتهيت من استكشاف خدمة Azure AI Language، فيمكنك حذف الموارد التي قمت بإنشائها في هذا التمرين. وإليك الطريقة:

1. يمكنك إغلاق جزء Azure Cloud Shell
1. في مدخل Microsoft Azure، انتقل إلى مورد Azure AI Language الذي أنشأته في هذا التدريب العملي.
1. في صفحة المورد، حدد **حذف** واتبع الإرشادات لحذف المورد.

## مزيد من المعلومات

لمزيد من المعلومات حول استخدام **Azure AI Language**، راجع [وثائق](https://learn.microsoft.com/azure/ai-services/language-service/).
