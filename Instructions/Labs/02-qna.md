---
lab:
  title: إنشاء حل للإجابة عن الأسئلة
  description: استخدم خدمة Azure AI Language لإنشاء حل مخصص للإجابة عن الأسئلة.
---

# إنشاء حل للإجابة على الأسئلة

أحد أكثر سيناريوهات المحادثة شيوعا هو توفير الدعم من خلال قاعدة المعارف (KB) من الأسئلة المتداولة (FAQs). تنشر العديد من المؤسسات الأسئلة الشائعة كمستندات أو صفحات ويب، وهو ما يعمل بشكل جيد مع مجموعة صغيرة من أزواج الأسئلة والأجوبة، ولكن قد يكون من الصعب البحث في المستندات الكبيرة ويستغرق وقتاً طويلاً.

**تتضمن لغة الذكاء الاصطناعي في Azure** *إمكانية الإجابة على الأسئلة* التي تمكنك من إنشاء قاعدة المعارف (KB) من أزواج الأسئلة والأجوبة التي يمكن الاستعلام عنها باستخدام إدخال اللغة الطبيعية، وهي الأكثر شيوعا كمورد يمكن للروبوت استخدامه للبحث عن إجابات للأسئلة المقدمة من المستخدمين. خلال هذا التمرين، سوف تعتمد على عدة تطوير البرامج (SDK) الخاصة بـ Azure AI Language بلغة Python لتحليل النصوص لإنشاء تطبيق بسيط للإجابة عن الأسئلة.

يستند هذا التمرين إلى لغة Python، لكن يمكنك تطوير تطبيقات للإجابة عن الأسئلة باستخدام عِدد تطوير برامج (SDK) خاصة بلغات متعددة، منها:

- [مكتبة عميل Azure AI Language Service Question Answering للغة Python](https://pypi.org/project/azure-ai-language-questionanswering/)
- [مكتبة عميل Azure AI Language Service Question Answering للغة NET.](https://www.nuget.org/packages/Azure.AI.Language.QuestionAnswering)

يستغرق هذا التدريب حوالي **20** دقيقة.

## توفير مورد *Azure AI Language*

إذا لم يكن لديك واحدًا بالفعل في اشتراكك، فستحتاج إلى توفير مورد **خدمة لغة الذكاء الاصطناعي في Azure**. بالإضافة إلى ذلك، لإنشاء واستضافة قاعدة معرفية للإجابة على الأسئلة، تحتاج إلى تمكين ميزة **الإجابة على الأسئلة**.

1. افتح مدخل Azure على `https://portal.azure.com`، وسجل الدخول باستخدام حساب Microsoft المقترن باشتراك Azure.
1. حدد **Create a resource.**
1. في حقل البحث، ابحث عن **خدمة اللغة**. ثم، في النتائج، حدد **إنشاء** ضمن **خدمة اللغة**.
1. حدد كتلة **الإجابة على الأسئلة المخصصة**. ثم حدد **متابعة لإنشاء المورد الخاص بك**. ستحتاج إلى إدخال الإعدادات التالية:

    - **Subscription**: *اشتراكك في Azure*
    - **مجموعة الموارد**: *اختيار مجموعة موارد أو إنشاءها*.
    - **المنطقة**: *اختر أي موقع متاح*
    - **الاسم**: *أدخل اسماً فريداً*
    - **طبقة الأسعار**: حدد **F0** (*مجاني*)، أو **S** (*قياسي*) إذا لم يكن F متوفراً.
    - **منطقة البحث في Azure**: *اختر موقعاً في نفس المنطقة العالمية التي يوجد بها مصدر اللغة الخاص بك*
    - **مستوى الأسعار الخاص ببحث Azure**: مجاني (F) (*إذا لم يكن هذا المستوى متاحاً، فاختر Basic (B)*)
    - **Responsible AI Notice**: *Agree*

1. حدد **إنشاء + مراجعة**، ثم حدد **إنشاء**.

    > **ملاحظة** تستخدم الإجابة على الأسئلة المخصصة Azure Search لفهرسة قاعدة المعارف (KB) الأسئلة والأجوبة والاستعلام عنها.

1. انتظر حتى يكتمل النشر، ثم انتقل إلى المورد المنشور.
1. اعرض صفحة **المفاتيح ونقطة النهاية** في قسم **إدارة الموارد**. ستحتاج إلى المعلومات الموجودة في هذه الصفحة لاحقاً في التمرين.

## إنشاء مشروع للإجابة على الأسئلة

لإنشاء قاعدة المعارف (KB) للإجابة على الأسئلة في مورد لغة الذكاء الاصطناعي في Azure، يمكنك استخدام مدخل Language Studio لإنشاء مشروع إجابة على الأسئلة. في هذه الحالة، ستقوم بإنشاء قاعدة المعارف (KB) يحتوي على أسئلة وإجابات حول [Microsoft Learn](https://docs.microsoft.com/learn).

1. في علامة تبويب مستعرض جديدة، افتح مدخل Language Studio في [https://language.cognitive.azure.com/](https://language.cognitive.azure.com/)، ثم سجل الدخول باستخدام حساب Microsoft المقترن باشتراك Azure خاصتك.
1. إذا طلب منك اختيار مورد اللغة، حدد الإعدادات التالية:
    - **Azure Directory**: دليل Azure الذي يحتوي على اشتراكك.
    - **Azure subscription**: اشتراك Azure الخاص بك.
    - **نوع المورد**: اللغة
    - **اسم المورد**. مورد "لغة الذكاء الاصطناعي في Azure" الذي أنشأتَه سابقًا.

    إذا <u>لم</u> تتم مطالبتك باختيار مورد language، فقد يرجع ذلك إلى وجود موارد Language متعددة في اشتراكك؛ وفي هذه الحالة:

    1. في الشريط الموجود أعلى الصفحة، حدّد زر **الإعدادات (&#9881؛**.
    2. في الصفحة **Settings** اعرض علامة التبويب **Resources**.
    3. حدد مورد language الذي أنشأته للتو، وانقر فوق **Switch resource**.
    4. في أعلى الصفحة، انقر فوق **Language Studio** للعودة إلى الصفحة الرئيسية في Language Studio.

1. في أعلى مدخل، في القائمة **إنشاء جديد**، حدد **الإجابة على الأسئلة المخصصة**.
1. في معالج ***إنشاء مشروع**، في صفحة **اختيار إعداد اللغة**، حدد الخيار **تحديد اللغة لجميع المشاريع**، ثم حدد **الإنجليزية** كلغة. بعد ذلك حدد **التالي**.
1. في صفحة **إدخال المعلومات الأساسية** أدخل التفاصيل التالية:
    - **الاسم** `LearnFAQ`
    - **الوصف**: `FAQ for Microsoft Learn`
    - **الإجابة الافتراضية عند عدم إرجاع أي إجابة**: `Sorry, I don't understand the question`
1. حدد **التالي**.
1. في صفحة **مراجعة وإنهاء**، حدد **إنشاء مشروع**.

## إضافة مصادر إلى قاعدة المعارف (KB)

يمكنك إنشاء قاعدة المعارف (KB) من البداية، ولكن من الشائع البدء باستيراد الأسئلة والأجوبة من صفحة أو مستند الأسئلة المتداولة الموجود. في هذه الحالة، ستقوم باستيراد البيانات من صفحة الأسئلة الشائعة الموجودة على Microsoft Learn، كما ستقوم أيضًا باستيراد بعض أسئلة وأجوبة "المحادثة" المحددة مسبقًا لدعم تبادلات المحادثة الشائعة.

1. في **صفحة إدارة المصادر** لمشروع الإجابة على سؤالك، في **&9547; أضف قائمة المصدر**، وحدد **عناوين URL**. ثم في **مربع الحوار إضافة عناوين URL**، حدد **&#9547; أضف url** وقم بتعيين الاسم وعنوان URL التاليين قبل تحديد **إضافة الكل** لإضافته إلى قاعدة المعارف (KB):
    - **الاسم:** `Learn FAQ Page`
    - **URL**: `https://docs.microsoft.com/en-us/learn/support/faq`
1. في **صفحة إدارة المصادر** لمشروع الإجابة على سؤالك، في **&#9547; أضف قائمة المصدر**، وحدد **عناوين URL**. في مربع الحوار **إضافة الدردشة التلقائية**، حدد **Friendly** وحدد **Add chit chat**.

## تحرير قاعدة المعرفة

تم ملء قاعدة المعارف (KB) بأزواج الأسئلة والأجوبة من الأسئلة المتداولة حول Microsoft Learn، وملحقة بمجموعة من أزواج الأسئلة والأجوبة الخاصة *بالدردشة التلقائية*. يمكنك توسيع قاعدة المعارف (KB) عن طريق إضافة أزواج إضافية من الأسئلة والأجوبة.

1. في مشروع **LearnFAQ** في Language Studio، حدد صفحة **تحرير قاعدة المعارف (KB)** لمشاهدة أزواج الأسئلة والأجوبة الموجودة (إذا تم عرض بعض التلميحات، فاقرأها واختر **حسناً** لتجاهلها، أو حدد **تخطي الكل**)
1. في قاعدة المعارف (KB)، في علامة التبويب **إجابات الأسئلة**، حدد **&#65291;**، وأنشئ زوجا جديدا من إجابات الأسئلة بالإعدادات التالية:
    - **المصدر**: `https://docs.microsoft.com/en-us/learn/support/faq`
    - **السؤال**: `What are Microsoft credentials?`
    - **الإجابة**: `Microsoft credentials enable you to validate and prove your skills with Microsoft technologies.`
1. حدد **تم**.
1. في صفحة **السؤال ما هي بيانات اعتماد Microsoft؟** التي تم إنشاؤها، قم بتوسيع **الأسئلة البديلة**. ثم أضف السؤال `How can I demonstrate my Microsoft technology skills?` البديل.

    في بعض الحالات، من المنطقي تمكين المستخدم من متابعة إجابة عن طريق إنشاء *محادثة متعددة الأدوار* تمكن المستخدم من تحسين السؤال بشكل متكرر للوصول إلى الإجابة التي يحتاجها.

1. ضمن الإجابة التي أدخلتها لسؤال الشهادة، قم بتوسيع **مطالبات المتابعة** وأضف مطالبة المتابعة التالية:
    - **النص المعروض في المطالبة للمستخدم**: `Learn more about credentials`.
    - حدد علامة التبويب **إنشاء ارتباط إلى زوج جديد**، وأدخل هذا النص: `You can learn more about credentials on the [Microsoft credentials page](https://docs.microsoft.com/learn/credentials/).`
    - حدد **إظهار في التدفق السياقي فقط**. يضمن هذا الخيار أن يتم إرجاع الإجابة فقط في سياق سؤال متابعة من سؤال الشهادة الأصلي.
1. حدد **إضافة مطالبة**.

## تدريب واختبار قاعدة المعارف

الآن، وبعد أن أصبحت لديك قاعدة معارف؛ فإنه يمكنك اختبارها في مدخل Language Studio.

1. احفظ التغييرات على قاعدة المعارف (KB) عن طريق تحديد الزر **حفظ** ضمن **علامة التبويب أزواج الأسئلة والإجابات** على اليسار.
1. بعد حفظ التغييرات، حدد الزر **اختبار** لفتح جزء الاختبار.
1. في جزء الاختبار، في الأعلى، قم بإلغاء تحديد **تضمين استجابة الإجابة القصيرة** (إذا لم يكن محددا بالفعل). ثم في الأسفل أدخل الرسالة `Hello`. وينبغي إرجاع استجابة مناسبة.
1. في جزء الاختبار، أدخل في الجزء السفلي رسالة تقول `What is Microsoft Learn?`. يجب إرجاع رد مناسب من الأسئلة الشائعة.
1. أدخل الرسالة `Thanks!` يجب إرجاع استجابة المحادثات التلقائية المناسبة.
1. إدخال الرسالة `Tell me about Microsoft credentials`. يجب أن يتم إرجاع الإجابة التي قمت بإنشائها مع رابط المتابعة السريع.
1. حدد الارتباط **تعرّف على المزيد حول متابعة بيانات الاعتماد**. يجب إرجاع إجابة المتابعة مع ارتباط إلى صفحة الشهادة.
1. عند الانتهاء من اختبار قاعدة المعرفة، قم بإغلاق جزء الاختبار.

## نشر قاعدة المعرفة

توفر قاعدة المعرفة خدمة خلفية يمكن لتطبيقات العميل استخدامها للإجابة على الأسئلة. أنت الآن جاهز لنشر قاعدة المعارف (KB) والوصول إلى واجهة REST الخاصة به من عميل.

1. في مشروع **LearnFAQ** في استوديو اللغة، حدد صفحة **نشر قاعدة المعرفة** من قائمة التنقل الموجودة على اليسار.
1. في أعلى الصفحة، حدد **نشر**. ثم حدد **نشر** لتأكيد رغبتك في نشر قاعدة المعارف (KB).
1. عند اكتمال النشر، حدد **الحصول على عنوان URL للتنبؤ** لعرض نقطة نهاية REST لقاعدة المعرفة الخاصة بك ولاحظ أن نموذج الطلب يتضمن معلمات لـ:
    - **projectName**: اسم مشروعك (الذي ينبغي أن يكون *LearnFAQ*)
    - **deploymentName**: اسم النشر الخاص بك (والذي يجب أن يكون *إنتاجاً*)
1. أغلق مربع حوار عنوان URL للتنبؤ.

## الإعداد لتطوير تطبيق في Cloud Shell

ستقوم بتطوير تطبيق للإجابة عن الأسئلة باستخدام Cloud Shell في مدخل Microsoft Azure. تم توفير ملفات التعليمات البرمجية لتطبيقك في GitHub repo.

1. في بوابة Azure، استخدم الزر **[\>_]** على يمين شريط البحث أعلى الصفحة لإنشاء Cloud Shell جديد في بوابة Azure، وتحديد بيئة ***PowerShell***. يوفّر Cloud Shell واجهة سطر أوامر في جزء أسفل بوابة Azure.

    > **ملاحظة**: إذا كنت قد أنشأت مسبقًا Cloud Shell يستخدم بيئة *معالج Bash*، فبدّل إلى ***PowerShell***.

1. في شريط أدوات Cloud Shell، في قائمة **الإعدادات**، حدد **الانتقال إلى الإصدار الكلاسيكي** (هذا مطلوب لاستخدام محرر التعليمات البرمجية).

    **<font color="red">تأكد من التبديل إلى الإصدار الكلاسيكي من cloud shell قبل المتابعة.</font>**

1. في جزء PowerShell، أدخل الأوامر التالية لاستنساخ مستودع GitHub لهذا التمرين:

    ```
    rm -r mslearn-ai-language -f
    git clone https://github.com/microsoftlearning/mslearn-ai-language
    ```

    > **تلميح**: عند إدخال الأوامر في Cloudshell، قد يحتل الناتج مساحة كبيرة من ذاكرة الشاشة المؤقتة. يمكنك مسح الشاشة عن طريق إدخال الأمر `cls` لتسهيل التركيز على كل مهمة.

1. بعد استنساخ مخزن بيانات خاصة، انتقل إلى المجلد الذي يحتوي على ملفات التعليمات البرمجية لتطبيق الدردشة:  

    ```
    cd mslearn-ai-language/Labfiles/02-qna/Python/qna-app
    ```

## تكوين تطبيقك

1. في جزء سطر الأوامر، أدخِل الأمر التالي لعرض ملفات التعليمات البرمجية الموجودة داخل مجلد **qna-app**:

    ```
   ls -a -l
    ```

    تحتوي الملفات على ملف تكوين (**.env**) وملف تعليمات برمجية (**qna-app.py**).

1. أنشئ بيئة افتراضية للغة Python وثبت حزمة تطوير البرامج (SDK) الخاصة بـ Azure AI Language Question Answering وغيرها من الحزم المطلوبة عبر تنفيذ الأمر التالي:

    ```
   python -m venv labenv
   ./labenv/bin/Activate.ps1
   pip install -r requirements.txt azure-ai-language-questionanswering
    ```

1. أدخِل الأمر التالي لتحرير ملف التكوين:

    ```
    code .env
    ```

    يتم فتح الملف في محرر التعليمات البرمجية.

1. في ملف التعليمات البرمجية، قُم بتحديث قيم التكوين لتطابق **نقطة النهاية** و**مفتاح** المصادقة لخدمة Azure Language التي أنشأتها (متوفرة في صفحة **المفاتيح ونقطة النهاية** لمورد Azure AI Language في مدخل Microsoft Azure). يجب أن يكون اسم المشروع واسم النشر قاعدة المعارف (KB) المنشورة أيضا في هذا الملف.
1. بعد استبدال العناصر النائبة، استخدم الأمر **CTRL+S** أو **Right-click > Save** لحفظ التغييرات ثم استخدم الأمر **CTRL+Q** أو **Right-click > Quit** لإغلاق محرر التعليمات البرمجية مع إبقاء سطر أوامر Cloud Shell مفتوحًا.

## أضِف التعليمات البرمجية لاستخدام قاعدة المعارف الخاصة بك

1. أدخِل الأمر التالي لفتح ملف التعليمات البرمجية الخاص بالتطبيق وتحريره:

    ```
    code qna-app.py
    ```

1. راجع التعليمات البرمجية الموجودة حاليًا. عليك إضافة التعليمات البرمجية لاستخدام قاعدة المعارف الخاصة بك.

    > **تلميح**: خلال إضافة التعليمات البرمجية إلى ملف التعليمات البرمجية، تأكد من الحفاظ على المسافة البادئة الصحيحة.

1. في ملف التعليمات البرمجية، ابحث عن التعليق **Import namespaces**. بعد ذلك، ضمن هذا التعليق، قُم بإضافة التعليمات البرمجية المناسبة للغة البرمجية لاستيراد مساحات الأسماء باستخدام عدة تطوير البرامج (SDK) للإجابة عن الأسئلة:

    ```python
   # import namespaces
   from azure.core.credentials import AzureKeyCredential
   from azure.ai.language.questionanswering import QuestionAnsweringClient
    ```

1. في الدالة **Main**، لاحظ أنه تم بالفعل توفير التعليمات البرمجية لتحميل نقطة النهاية ومفتاح خدمة Azure AI Language من ملف التكوين. بعد ذلك، ابحث عن التعليق **Create client using endpoint and key**، وأضِف التعليمات البرمجية التالية لإنشاء عميل للإجابة عن الأسئلة:

    ```Python
   # Create client using endpoint and key
   credential = AzureKeyCredential(ai_key)
   ai_client = QuestionAnsweringClient(endpoint=ai_endpoint, credential=credential)
    ```

1. في ملف التعليمات البرمجية ، ابحث عن التعليق **Submit a question and display the answer**، وأضِف التعليمات البرمجية التالية لقراءة الأسئلة بشكل متكرر من سطر الأوامر، وإرسالها إلى الخدمة، وعرض تفاصيل الإجابات:

    ```Python
   # Submit a question and display the answer
   user_question = ''
   while True:
        user_question = input('\nQuestion:\n')
        if user_question.lower() == "quit":                
            break
        response = ai_client.get_answers(question=user_question,
                                        project_name=ai_project_name,
                                        deployment_name=ai_deployment_name)
        for candidate in response.answers:
            print(candidate.answer)
            print("Confidence: {}".format(candidate.confidence))
            print("Source: {}".format(candidate.source))
    ```

1. احفظ تغييراتك باستخدام (CTRL+S)، بعدها نفذ الأمر التالي لتشغيل البرنامج (قُم بتكبير جزء cloud shell وتعديل حجم الألواح لمشاهدة المزيد من النص في جزء سطر الأوامر):

    ```
   python qna-app.py
    ```

1. عند المطالبة، أدخل سؤالا لإرساله إلى مشروع الإجابة على سؤالك؛ على سبيل المثال `What is a learning path?`.
1. راجع الإجابة التي يتم إرجاعها.
1. اطرح المزيد من الأسئلة. عند الانتهاء، أدخِل `quit`.

## تنظيف الموارد

إذا انتهيت من استكشاف خدمة Azure AI Language، فيمكنك حذف الموارد التي قمت بإنشائها في هذا التمرين. وإليك الطريقة:

1. يمكنك إغلاق جزء Azure Cloud Shell
1. في مدخل Microsoft Azure، انتقل إلى مورد Azure AI Language الذي أنشأته في هذا التدريب العملي.
1. في صفحة المورد، حدد **حذف** واتبع الإرشادات لحذف المورد.

## مزيد من المعلومات

للتعرّف على المزيد حول الإجابة على الأسئلة في لغة الذكاء الاصطناعي في Azure، راجع [وثائق](https://learn.microsoft.com/azure/ai-services/language-service/question-answering/overview) لغة الذكاء الاصطناعي في Azure.
